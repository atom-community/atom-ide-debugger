"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _classnames = _interopRequireDefault(require("classnames"));

var _UniversalDisposable = _interopRequireDefault(require("@atom-ide-community/nuclide-commons/UniversalDisposable"));

var React = _interopRequireWildcard(require("react"));

var _bindObservableAsProps = require("@atom-ide-community/nuclide-commons-ui/bindObservableAsProps");

var _rxjsCompatUmdMin = require("rxjs-compat/bundles/rxjs-compat.umd.min.js");

var _WatchExpressionComponent = _interopRequireDefault(require("./WatchExpressionComponent"));

var _event = require("@atom-ide-community/nuclide-commons/event");

function _getRequireWildcardCache() { if (typeof WeakMap !== "function") return null; var cache = new WeakMap(); _getRequireWildcardCache = function () { return cache; }; return cache; }

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== "object" && typeof obj !== "function") { return { default: obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

class WatchView extends React.PureComponent {
  constructor(props) {
    super(props);
    this._watchExpressionComponentWrapped = void 0;
    this._disposables = void 0;
    const {
      service
    } = props;
    const {
      viewModel
    } = service;
    const model = service.getModel();
    const watchExpressionChanges = (0, _event.observableFromSubscribeFunction)(model.onDidChangeWatchExpressions.bind(model));
    const focusChanges = (0, _event.observableFromSubscribeFunction)(viewModel.onDidChangeDebuggerFocus.bind(viewModel));
    const expressionContextChanges = (0, _event.observableFromSubscribeFunction)(viewModel.onDidChangeExpressionContext.bind(viewModel));
    this._watchExpressionComponentWrapped = (0, _bindObservableAsProps.bindObservableAsProps)(_rxjsCompatUmdMin.Observable.merge(watchExpressionChanges, focusChanges, expressionContextChanges).startWith(null).map(() => ({
      focusedProcess: viewModel.focusedProcess,
      focusedStackFrame: viewModel.focusedStackFrame,
      watchExpressions: model.getWatchExpressions()
    })), _WatchExpressionComponent.default);
  }

  render() {
    const {
      service
    } = this.props;
    const WatchExpressionComponentWrapped = this._watchExpressionComponentWrapped;
    return /*#__PURE__*/React.createElement("div", {
      className: (0, _classnames.default)("debugger-container-new")
    }, /*#__PURE__*/React.createElement("div", {
      className: "debugger-pane-content"
    }, /*#__PURE__*/React.createElement(WatchExpressionComponentWrapped, {
      onAddWatchExpression: service.addWatchExpression.bind(service),
      onRemoveWatchExpression: service.removeWatchExpressions.bind(service),
      onUpdateWatchExpression: service.renameWatchExpression.bind(service)
    })));
  }

}

exports.default = WatchView;
module.exports = exports.default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIldhdGNoVmlldy5qcyJdLCJuYW1lcyI6WyJXYXRjaFZpZXciLCJSZWFjdCIsIlB1cmVDb21wb25lbnQiLCJjb25zdHJ1Y3RvciIsInByb3BzIiwiX3dhdGNoRXhwcmVzc2lvbkNvbXBvbmVudFdyYXBwZWQiLCJfZGlzcG9zYWJsZXMiLCJzZXJ2aWNlIiwidmlld01vZGVsIiwibW9kZWwiLCJnZXRNb2RlbCIsIndhdGNoRXhwcmVzc2lvbkNoYW5nZXMiLCJvbkRpZENoYW5nZVdhdGNoRXhwcmVzc2lvbnMiLCJiaW5kIiwiZm9jdXNDaGFuZ2VzIiwib25EaWRDaGFuZ2VEZWJ1Z2dlckZvY3VzIiwiZXhwcmVzc2lvbkNvbnRleHRDaGFuZ2VzIiwib25EaWRDaGFuZ2VFeHByZXNzaW9uQ29udGV4dCIsIk9ic2VydmFibGUiLCJtZXJnZSIsInN0YXJ0V2l0aCIsIm1hcCIsImZvY3VzZWRQcm9jZXNzIiwiZm9jdXNlZFN0YWNrRnJhbWUiLCJ3YXRjaEV4cHJlc3Npb25zIiwiZ2V0V2F0Y2hFeHByZXNzaW9ucyIsIldhdGNoRXhwcmVzc2lvbkNvbXBvbmVudCIsInJlbmRlciIsIldhdGNoRXhwcmVzc2lvbkNvbXBvbmVudFdyYXBwZWQiLCJhZGRXYXRjaEV4cHJlc3Npb24iLCJyZW1vdmVXYXRjaEV4cHJlc3Npb25zIiwicmVuYW1lV2F0Y2hFeHByZXNzaW9uIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBRUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7Ozs7Ozs7O0FBTWUsTUFBTUEsU0FBTixTQUF3QkMsS0FBSyxDQUFDQyxhQUE5QixDQUFtRDtBQUloRUMsRUFBQUEsV0FBVyxDQUFDQyxLQUFELEVBQWU7QUFDeEIsVUFBTUEsS0FBTjtBQUR3QixTQUgxQkMsZ0NBRzBCO0FBQUEsU0FGMUJDLFlBRTBCO0FBRXhCLFVBQU07QUFBRUMsTUFBQUE7QUFBRixRQUFjSCxLQUFwQjtBQUNBLFVBQU07QUFBRUksTUFBQUE7QUFBRixRQUFnQkQsT0FBdEI7QUFDQSxVQUFNRSxLQUFLLEdBQUdGLE9BQU8sQ0FBQ0csUUFBUixFQUFkO0FBQ0EsVUFBTUMsc0JBQXNCLEdBQUcsNENBQWdDRixLQUFLLENBQUNHLDJCQUFOLENBQWtDQyxJQUFsQyxDQUF1Q0osS0FBdkMsQ0FBaEMsQ0FBL0I7QUFDQSxVQUFNSyxZQUFZLEdBQUcsNENBQWdDTixTQUFTLENBQUNPLHdCQUFWLENBQW1DRixJQUFuQyxDQUF3Q0wsU0FBeEMsQ0FBaEMsQ0FBckI7QUFDQSxVQUFNUSx3QkFBd0IsR0FBRyw0Q0FDL0JSLFNBQVMsQ0FBQ1MsNEJBQVYsQ0FBdUNKLElBQXZDLENBQTRDTCxTQUE1QyxDQUQrQixDQUFqQztBQUdBLFNBQUtILGdDQUFMLEdBQXdDLGtEQUN0Q2EsNkJBQVdDLEtBQVgsQ0FBaUJSLHNCQUFqQixFQUF5Q0csWUFBekMsRUFBdURFLHdCQUF2RCxFQUNHSSxTQURILENBQ2EsSUFEYixFQUVHQyxHQUZILENBRU8sT0FBTztBQUNWQyxNQUFBQSxjQUFjLEVBQUVkLFNBQVMsQ0FBQ2MsY0FEaEI7QUFFVkMsTUFBQUEsaUJBQWlCLEVBQUVmLFNBQVMsQ0FBQ2UsaUJBRm5CO0FBR1ZDLE1BQUFBLGdCQUFnQixFQUFFZixLQUFLLENBQUNnQixtQkFBTjtBQUhSLEtBQVAsQ0FGUCxDQURzQyxFQVF0Q0MsaUNBUnNDLENBQXhDO0FBVUQ7O0FBRURDLEVBQUFBLE1BQU0sR0FBZTtBQUNuQixVQUFNO0FBQUVwQixNQUFBQTtBQUFGLFFBQWMsS0FBS0gsS0FBekI7QUFDQSxVQUFNd0IsK0JBQStCLEdBQUcsS0FBS3ZCLGdDQUE3QztBQUVBLHdCQUNFO0FBQUssTUFBQSxTQUFTLEVBQUUseUJBQVcsd0JBQVg7QUFBaEIsb0JBQ0U7QUFBSyxNQUFBLFNBQVMsRUFBQztBQUFmLG9CQUNFLG9CQUFDLCtCQUFEO0FBQ0UsTUFBQSxvQkFBb0IsRUFBRUUsT0FBTyxDQUFDc0Isa0JBQVIsQ0FBMkJoQixJQUEzQixDQUFnQ04sT0FBaEMsQ0FEeEI7QUFFRSxNQUFBLHVCQUF1QixFQUFFQSxPQUFPLENBQUN1QixzQkFBUixDQUErQmpCLElBQS9CLENBQW9DTixPQUFwQyxDQUYzQjtBQUdFLE1BQUEsdUJBQXVCLEVBQUVBLE9BQU8sQ0FBQ3dCLHFCQUFSLENBQThCbEIsSUFBOUIsQ0FBbUNOLE9BQW5DO0FBSDNCLE1BREYsQ0FERixDQURGO0FBV0Q7O0FBekMrRCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIHsgSURlYnVnU2VydmljZSB9IGZyb20gXCIuLi90eXBlc1wiXHJcblxyXG5pbXBvcnQgY2xhc3NuYW1lcyBmcm9tIFwiY2xhc3NuYW1lc1wiXHJcbmltcG9ydCBVbml2ZXJzYWxEaXNwb3NhYmxlIGZyb20gXCJAYXRvbS1pZGUtY29tbXVuaXR5L251Y2xpZGUtY29tbW9ucy9Vbml2ZXJzYWxEaXNwb3NhYmxlXCJcclxuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSBcInJlYWN0XCJcclxuaW1wb3J0IHsgYmluZE9ic2VydmFibGVBc1Byb3BzIH0gZnJvbSBcIkBhdG9tLWlkZS1jb21tdW5pdHkvbnVjbGlkZS1jb21tb25zLXVpL2JpbmRPYnNlcnZhYmxlQXNQcm9wc1wiXHJcbmltcG9ydCB7IE9ic2VydmFibGUgfSBmcm9tIFwicnhqcy1jb21wYXQvYnVuZGxlcy9yeGpzLWNvbXBhdC51bWQubWluLmpzXCJcclxuaW1wb3J0IFdhdGNoRXhwcmVzc2lvbkNvbXBvbmVudCBmcm9tIFwiLi9XYXRjaEV4cHJlc3Npb25Db21wb25lbnRcIlxyXG5pbXBvcnQgeyBvYnNlcnZhYmxlRnJvbVN1YnNjcmliZUZ1bmN0aW9uIH0gZnJvbSBcIkBhdG9tLWlkZS1jb21tdW5pdHkvbnVjbGlkZS1jb21tb25zL2V2ZW50XCJcclxuXHJcbnR5cGUgUHJvcHMgPSB7XHJcbiAgc2VydmljZTogSURlYnVnU2VydmljZSxcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgV2F0Y2hWaWV3IGV4dGVuZHMgUmVhY3QuUHVyZUNvbXBvbmVudDxQcm9wcz4ge1xyXG4gIF93YXRjaEV4cHJlc3Npb25Db21wb25lbnRXcmFwcGVkOiBSZWFjdC5Db21wb25lbnRUeXBlPGFueT5cclxuICBfZGlzcG9zYWJsZXM6IFVuaXZlcnNhbERpc3Bvc2FibGVcclxuXHJcbiAgY29uc3RydWN0b3IocHJvcHM6IFByb3BzKSB7XHJcbiAgICBzdXBlcihwcm9wcylcclxuICAgIGNvbnN0IHsgc2VydmljZSB9ID0gcHJvcHNcclxuICAgIGNvbnN0IHsgdmlld01vZGVsIH0gPSBzZXJ2aWNlXHJcbiAgICBjb25zdCBtb2RlbCA9IHNlcnZpY2UuZ2V0TW9kZWwoKVxyXG4gICAgY29uc3Qgd2F0Y2hFeHByZXNzaW9uQ2hhbmdlcyA9IG9ic2VydmFibGVGcm9tU3Vic2NyaWJlRnVuY3Rpb24obW9kZWwub25EaWRDaGFuZ2VXYXRjaEV4cHJlc3Npb25zLmJpbmQobW9kZWwpKVxyXG4gICAgY29uc3QgZm9jdXNDaGFuZ2VzID0gb2JzZXJ2YWJsZUZyb21TdWJzY3JpYmVGdW5jdGlvbih2aWV3TW9kZWwub25EaWRDaGFuZ2VEZWJ1Z2dlckZvY3VzLmJpbmQodmlld01vZGVsKSlcclxuICAgIGNvbnN0IGV4cHJlc3Npb25Db250ZXh0Q2hhbmdlcyA9IG9ic2VydmFibGVGcm9tU3Vic2NyaWJlRnVuY3Rpb24oXHJcbiAgICAgIHZpZXdNb2RlbC5vbkRpZENoYW5nZUV4cHJlc3Npb25Db250ZXh0LmJpbmQodmlld01vZGVsKVxyXG4gICAgKVxyXG4gICAgdGhpcy5fd2F0Y2hFeHByZXNzaW9uQ29tcG9uZW50V3JhcHBlZCA9IGJpbmRPYnNlcnZhYmxlQXNQcm9wcyhcclxuICAgICAgT2JzZXJ2YWJsZS5tZXJnZSh3YXRjaEV4cHJlc3Npb25DaGFuZ2VzLCBmb2N1c0NoYW5nZXMsIGV4cHJlc3Npb25Db250ZXh0Q2hhbmdlcylcclxuICAgICAgICAuc3RhcnRXaXRoKG51bGwpXHJcbiAgICAgICAgLm1hcCgoKSA9PiAoe1xyXG4gICAgICAgICAgZm9jdXNlZFByb2Nlc3M6IHZpZXdNb2RlbC5mb2N1c2VkUHJvY2VzcyxcclxuICAgICAgICAgIGZvY3VzZWRTdGFja0ZyYW1lOiB2aWV3TW9kZWwuZm9jdXNlZFN0YWNrRnJhbWUsXHJcbiAgICAgICAgICB3YXRjaEV4cHJlc3Npb25zOiBtb2RlbC5nZXRXYXRjaEV4cHJlc3Npb25zKCksXHJcbiAgICAgICAgfSkpLFxyXG4gICAgICBXYXRjaEV4cHJlc3Npb25Db21wb25lbnRcclxuICAgIClcclxuICB9XHJcblxyXG4gIHJlbmRlcigpOiBSZWFjdC5Ob2RlIHtcclxuICAgIGNvbnN0IHsgc2VydmljZSB9ID0gdGhpcy5wcm9wc1xyXG4gICAgY29uc3QgV2F0Y2hFeHByZXNzaW9uQ29tcG9uZW50V3JhcHBlZCA9IHRoaXMuX3dhdGNoRXhwcmVzc2lvbkNvbXBvbmVudFdyYXBwZWRcclxuXHJcbiAgICByZXR1cm4gKFxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT17Y2xhc3NuYW1lcyhcImRlYnVnZ2VyLWNvbnRhaW5lci1uZXdcIil9PlxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZGVidWdnZXItcGFuZS1jb250ZW50XCI+XHJcbiAgICAgICAgICA8V2F0Y2hFeHByZXNzaW9uQ29tcG9uZW50V3JhcHBlZFxyXG4gICAgICAgICAgICBvbkFkZFdhdGNoRXhwcmVzc2lvbj17c2VydmljZS5hZGRXYXRjaEV4cHJlc3Npb24uYmluZChzZXJ2aWNlKX1cclxuICAgICAgICAgICAgb25SZW1vdmVXYXRjaEV4cHJlc3Npb249e3NlcnZpY2UucmVtb3ZlV2F0Y2hFeHByZXNzaW9ucy5iaW5kKHNlcnZpY2UpfVxyXG4gICAgICAgICAgICBvblVwZGF0ZVdhdGNoRXhwcmVzc2lvbj17c2VydmljZS5yZW5hbWVXYXRjaEV4cHJlc3Npb24uYmluZChzZXJ2aWNlKX1cclxuICAgICAgICAgIC8+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgKVxyXG4gIH1cclxufVxyXG4iXX0=